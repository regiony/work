/*
********************************************************************************
文件名	：ymodem.h
文件描述：Y-MODEM通信协议头文件
建立人	：杨瑞军
建立日期：2016.12.15
修改内容：
修改人	：
修改日期：
********************************************************************************
*/

#ifndef __YMODEM_H
#define __YMODEM_H

#ifdef __YMODEM_GLOBAL
	#define __YMODEM_EXE 
#else
	#define __YMODEM_EXE extern
#endif

#ifdef __cplusplus
	extern "C" {
#endif 

/*
********************************************************************************
头文件
********************************************************************************
*/
#include "stm32f0xx.h"

/*
********************************************************************************
宏定义
********************************************************************************
*/
#define YMODEM_RX_BUF_LEN 	1029			//1024+5
#define YMODEM_TX_BUF_LEN	133				//

/*
********************************************************************************
公共变量定义
********************************************************************************
*/
//通信结构体定义
typedef struct
{
	uint16_t rx_cnt;
	uint16_t rx_len;
	uint16_t tx_cnt;
	uint16_t tx_len;	
	uint8_t	rx[YMODEM_RX_BUF_LEN];
	uint8_t	tx[YMODEM_TX_BUF_LEN];
	uint8_t comm_state;
}YMODEM_COMM_TYPE_DEF;

/*
********************************************************************************
公共函数定义
********************************************************************************
*/
void ymodem_init(void);				//Y-MODEM初始化函数

/*
********************************************************************************
私有变量定义
********************************************************************************
*/
__YMODEM_EXE YMODEM_COMM_TYPE_DEF ymodem_comm_msg;

/*
********************************************************************************
私有函数定义
********************************************************************************
*/


#ifdef __cplusplus
	}
#endif

#endif
